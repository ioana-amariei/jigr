<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>jigr (Jigsaw Web Manager)</title>
    <link rel="stylesheet" href="css/scholarly.min.css">
    <script src="js/scholarly.min.js"></script>

    <style>
        p, li, ol {
            font-size: large;
        }
    </style>
</head>

<body itemscope="itemscope" itemtype="https://schema.org/ScholarlyArticle" schema: http://schema.org"> <header
    itemscope="itemscope" itemtype="https://schema.org/WPHeader">
    <div class="banner">
        <img itemscope="itemscope" itemtype="https://schema.org/ImageObject" src="scholarly-html.svg" width="227"
            height="50" alt="Scholarly HTML logo">
        <div class="status">Community Draft</div>
    </div>
    <h1 itemscope="itemscope" itemtype="https://schema.org/Game">jigr (Jigsaw Web Manager)</h1>
    <code itemscope="itemscope" itemtype="https://schema.org/CollegeOrUniversity" style=" font-weight:bold;">project, infoiasi, cliw,  web</code>
    </header>

    <div role="contentinfo">
        <dl>
            <dt>Authors</dt>
            <dd>
                <i style="font-size:large;">Birsan Ioana, Cumpata Lucian</i>
            </dd>
            <dt>Project link</dt>
            <dd>
                <a href="https://github.com/ioanabirsan/jigr">https://github.com/ioanabirsan/jigr </a>
            </dd>
        </dl>
    </div>

    <section id="introduction" role="doc-introduction">
        <h2>Introduction</h2>
        <p style="font-size:large;">
            This Web application allows solving puzzles proposed by the program or defined by users.
            Each player will be able to select - locally or remotely via a URL - an image
            that will be cropped at runtime into fragments as complicated as possible using generative grammar rules.
            The pieces will be mixed, the shifts / swings can be performed via drag & drop operations.
            The application will also provide support for snap placement in the right area.
            The current status of each puzzle can be saved locally with the possibility of subsequent restoration.
        </p>
    </section>

    <section id="concepts-on-design">
        <h2>General design</h2>
        <ul>
            <li style="font-size:large;">
                single page application
            </li>
            <li style="font-size:large;">
                provides various options structured as follows:
                <ul>
                    <li style="font-size:large;">help area for more information regarding the game and how to play it</li>
                    <li style="font-size:large;">progress view area</li>
                    <li style="font-size:large;">the possibility of receiving a hint for solving a piece: the current
                        one or a random one</li>
                    <li style="font-size:large;">the ability to reset the game to its original state</li>
                    <li style="font-size:large;">load area for choosing an image, either locally or remotely via a URL,
                        and for importing last played game state</li>
                    <li style="font-size:large;">save the current state of the game</li>
                    <li style="font-size:large;">difficulty selection for both the difficulty of the game and the
                        difficulty of generating the puzzle</li>
                </ul>
            </li>
            <li style="font-size:large;">
                desktop and mobile interfaces
                <p style="font-size:large; text-align: center;">First iteration</p>
                <img itemscope="itemscope" itemtype="https://schema.org/ImageObject" src="img/initial-layout.png" alt="initial desktop view"
                    style="width:750px; height:475px;">
                <p style="font-size:large; text-align: center;">Last iteration</p>
                <img itemscope="itemscope" itemtype="https://schema.org/ImageObject" src="img/actual-layout.png" alt="initial desktop view"
                    style="width:750px; height:475px;">
                <p style="font-size:large; text-align: center;">Desktop version screenshot</p>
                <img itemscope="itemscope" itemtype="https://schema.org/ImageObject" src="img/desktop.png" alt="desktop view"
                    style="width:100%; height:100%;">
                <p style="font-size:large; text-align: center;">Mobile version screenshots</p>
                <img itemscope="itemscope" itemtype="https://schema.org/ImageObject" src="img/mobile-1.png" alt="mobile view"
                    style="width:45%; height:100%;">
                <img itemscope="itemscope" itemtype="https://schema.org/ImageObject" src="img/mobile-2.png" alt="mobile view difficulty"
                    style="width:45%; height:100%;">
            </li>
        </ul>
    </section>

    <section id="user-interaction">
        <h2>User interaction</h2>
        <p style="font-size:large;">The user will interact with the application using the following mechanisms:
            keyboard and mouse.
            He will be able to use the keyboard to move the pieces around and perform rotation operations. The mouse
            can be used
            to drag pieces around and rotate them.</p>
    </section>

    <section id="source-code-management">
        <h2>Souce code management</h2>
        <p style="font-size:large;">We have been following this development process:</p>
        <ol>
            <li style="font-size:large;">
                Clone the project locally. This step should be skipped in future iterations.
            </li>
            <li style="font-size:large;">
                Checkout to master and pull the latest version from github locally before adding any other code.
                This should be done each time you want to make changes starting from the latest master changes:
                <ul>
                    <li style="font-size:large;">
                        <code>git branch</code> -> current branch
                    </li>
                    <li style="font-size:large;">
                        <code>git checkout branch-name</code> -> move to branch <code>branch-name</code>
                    </li>
                </ul>
            </li>
            <li style="font-size:large;">
                Checkout to a new branch with a name that describes the feature, following the standard <b>name/feature</b>:
                <code>git checkout -b andrei/add-animations</code>
            </li>
            <li style="font-size:large;">
                Make desired changes to the code and make commits with those changes: <br>
                <code>git commit -m "message that describes commit"</code>
            </li>
            <li style="font-size:large;">
                Push the changes to GitHub to a branch with the same name: <br>
                <code>git push -u origin local-branch-name:desired-branch-name-on-github</code> <br>
                (e.g., <code>`git push -u origin andrei/add-animations:andrei/add-animations`</code>)
            </li>
            <li style="font-size:large;">
                Validate that the changes work as expected.
            </li>
            <li style="font-size:large;">
                If changes work as expected merge the new branch to the <b>master</b> branch. This can be done from the
                GitHub UI.
            </li>
        </ol>
    </section>

    <section id="software-architecture">
        <h2>Software Architecture</h2>
        <ol>
            <li style="font-size:large;">
                <h4>Single Page Application</h4>
                <p>
                    In order to improve user experience and
                    avoid interruptions the application will be conceived
                    as a Single Page Application (SPA).
                </p>
                <p>
                    As such, when the user accesses the URI of the application,
                    the client/browser will download all the necessary
                    code (e.g., HTML, CSS, JavaScript, etc.) from the first page load.
                </p>
                <p>
                    After all the necessary code is retrieved in the context
                    of the first page load, the game/application will be able to provide
                    its functionality without interacting with the backend.
                </p>    
                <p>
                    The role of the backend will be to serve just static content in
                    our case, without the role of generating dynamic content.
                </p>
                <img src="diagrams/component/client-server.png" alt="client-server-diagram">
            </li>
            <li style="font-size:large;">
                <h4>High-level components</h4>
                <p>
                    In this section we will depict the high-level architecture of the 
                    application. 
                </p>
                <img src="diagrams/component/high-level.png" alt="High level">
            </li>
            <li style="font-size:large;">
                <h4>Classes</h4>
                <p>
                    In this section we will depict the class design of the application.
                </p>

                <p>Puzzle related classes</p>
                <img src="diagrams/class/puzzle.png" alt="Puzzle">

                <p>Control related classes</p>
                <img src="diagrams/class/control.png" alt="Control">
            </li>
            <li style="font-size:large;">
                    <h4>Sequence</h4>
                    <p>
                        In this section we will depict sequence diagrams.
                    </p>
                    Playing a game
                    <img src="diagrams/sequence/play-game.png" alt="play game">
                </li>
    
    
            <li style="font-size:large;">
                Data storage
                <ul>
                    <li style="font-size:large;">
                        <h4>Storage Technologies</h4>
                        While running, the application will store its data in 
                        JavaScript objects.
                
                        In order to improve the User Experience, we would like 
                        to offer the user the possibility to persist the game 
                        state in order to enable him to resume the game at a later time.
                        In order to accomplish this, we will use two techniques:
                
                        <h5>Web Storage API: Local Storage</h5>
                            We will use the Web Storage API Local Storage mechanism 
                            in order to persist the game state when the <strong>browser.tabs.onRemoved</strong> event is 
                            triggered. 
                
                            <p>
                            The data will be saved using a predefined key and it will 
                            be represented by a JavaScript object.
                            </p>
                
                            When the application is reopened, at a later time, it 
                            will first check to see if there is a previous game 
                            saved at the predefined key in the Local Storage, and it will 
                            resume it; otherwise, it will present the user the normal flow.
                
                        <h5>Files</h5>
                            The user will also have the possibility the save 
                            the game state externally, in a file, in JSON format.
                
                            If the user wants to resume the game at a later time, 
                            possibly in another browser, or on another computer, he 
                            can load the saved game file and it will resume it from the saved state.
                    </li>
                    <li style="font-size:large;">
                        <h4>Data Structure</h4>
                        <pre>
                            {
                                pieces: [Piece],
                                isSolved: boolean,
                                progress: Number
                                // Possibly other
                            }
                        </pre>
                        
                    </li>
                </ul>
            </li>
            <li style="font-size:large;">
                <h4>Internationalization and Localization</h4>                         
                        <h5>Localization</h5>
                
                          We can define a <strong>locales</strong> object that stores the localized strings for each language:

                          <pre>
                          var locales = {
                              en: {
                                  play: "Play",
                                  gameOver: "Game Over",
                                  ...
                              },
                              ro: {
                                  play: "Joaca",
                                  gameOver: "Jocul s-a terminat",
                                  ...
                              }
                              fr: {
                
                              }
                              ...
                          }
                        </pre>
                        <h5>Internationalization</h5>
                          Each internationalized element in HTML will be encapsulated in a <strong>span</strong> element. 
                          All <strong>span</strong> elements will have the same class and a distinct <strong>id</strong> which will 
                          identify the key to be used for each locale.
                
                          When the user selects a language, a JavaScript function call will be triggered which will process the 
                          <strong>span</strong> elements and updates their text accordingly.
                
                        <pre>
                            for (var span : getLocalizedElements()) {
                                var id = e.getId();
                                span.innerHTML = locales[currentLocale][id];
                            }
                        </pre>    

                        Alternatives we managed to find on the Web:
        
                        <ul>
                            <li>ECMAScript Internationalization API Specification: http://ecma-international.org/ecma-402/1.0/</li>
                        
                            <li>FormatJS: https://formatjs.io/</li>
                        
                            <li>IntlMessageFormat: https://github.com/yahoo/intl-messageformat </li>

                            <li>Other: https://www.sitepen.com/blog/2017/07/19/the-state-of-internationalization-in-javascript/</li>
                        </ul>
            </li>
        </ol>
    </section>

    <section id="project-development">
        <h2 itemscope itemtype="https://pending.schema.org/Project">Intermediate stages of project development</h2>
        <p style="font-size:large;"></p>
    </section>

    <section id="client-storage-solutions">
        <h2>Client level storage</h2>
        <img itemscope itemtype="https://schema.org/ImageObject" src="img/local-storage.png" alt="client level storage">
    </section>

    <section id="web-dev-tools">
        <h2>Web development tools and technologies</h2>
        <ul>
            <li style="font-size:large;">
                The web app was/is coded using Visual Studio Code
            </li>
            <li style="font-size:large;">
                The code is then run and tested using Mozilla Firefox Developer Edition
            </li>
            <li style="font-size:large;">
                Then we upload the code modifications to GitHub
            </li>
            <li style="font-size:large;">
                Communications and task management is done through Slack and Trello
            </li>
            <li style="font-size:large;">
                Technologies used: HTML5, CSS, JavaScript
            </li>

        </ul>
        <img src="img/visual-studio-code-logo.png" alt="Visual Studio Code logo" style="width:128px; height:128px;">
        <img src="img/Firefox_Developer_Edition_Logo_2017.png" alt="Firefo dev logo" style="width:128px; height:128px;">
        <img src="img/github-logo.png" alt="GitHub logo" style="width:128px; height:128px;">
        <img src="img/Slack-logo.png" alt="Slack logo" style="width:128px; height:128px;">
        <img src="img/trello-logo.png" alt="Trello logo" style="width:128px; height:128px;">
        <img src="img/css3-html5-javascript-logo.png" alt="html5 css js logo" style="width:230px; height:128px;">
    </section>

    <section id="references">
        <h2>References</h2>
        <ol>
            <li itemscope itemtype="https://schema.org/URL" style="font-size:large;">
                https://developer.mozilla.org/ro/
            </li>
            <li itemscope itemtype="https://schema.org/URL" style="font-size:large;">
                https://bitsofco.de/an-overview-of-client-side-storage/
            </li>
            <li itemscope itemtype="https://schema.org/URL" style="font-size:large;">
                https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API
            </li>
            <li itemscope itemtype="https://schema.org/URL" style="font-size:large;">
                https://en.wikipedia.org/wiki/Single-page_application
            </li>
            <li itemscope itemtype="https://schema.org/URL" style="font-size:large;">
                http://singlepageappbook.com/single-page.html
            </li>
            <li itemscope itemtype="https://schema.org/URL" style="font-size:large;">
                http://ecma-international.org/ecma-402/1.0/
            </li>
        </ol>
    </section>

</body>

</html>